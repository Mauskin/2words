// Generated by CoffeeScript 1.10.0
(function() {
  var convertToText, decimals, getDecimals, getHundreds, hundreds, initialCheck, isNumber, processInput, tens, thousands, toWords, tooLarge, units;

  initialCheck = function(number) {
    if (number == null) {
      return true;
    }
    if (!isNumber(number)) {
      return true;
    }
    if (isNaN(number)) {
      return true;
    }
    if (tooLarge(number)) {
      return true;
    }
  };

  isNumber = function(number) {
    var initNumber;
    initNumber = +number;
    return typeof initNumber === 'number' || initNumber.constructor === Number;
  };

  tooLarge = function(number) {
    return number > 8999999999999999;
  };

  hundreds = ['', 'сто', 'двести', 'триста', 'четыреста', 'пятьсот', 'шестьсот', 'семьсот', 'восемьсот', 'девятьсот'];

  tens = ['', 'десять', 'двадцать', 'тридцать', 'сорок', 'пятьдесят', 'шестьдесят', 'семьдесят', 'восемьдесят', 'девяносто'];

  units = ['', 'один', 'два', 'три', 'четыре', 'пять', 'шесть', 'семь', 'восемь', 'девять'];

  decimals = ['', 'одиннадцать', 'двенадцать', 'тринадцать', 'четырнадцать', 'пятнадцать', 'шестнадцать', 'семнадцать', 'восемнадцать', 'девятнадцать'];

  thousands = [['', '', ''], ['тысяча', 'тысячи', 'тысяч'], ['миллион', 'миллиона', 'миллионов'], ['миллиард', 'миллиарда', 'миллиардов'], ['триллион', 'триллиона', 'триллионов'], ['квадриллион', 'квадриллиона', 'квадриллионов'], ['квинтиллион', 'квинтиллиона', 'квинтиллионов']];

  getDecimals = function(number, variant) {
    var decimal, left, right, unit;
    if (variant == null) {
      variant = false;
    }
    decimal = number % 100;
    if ((10 < decimal && decimal < 20)) {
      return "" + decimals[decimal % 10];
    }
    right = decimal % 10;
    left = (decimal - right) / 10;
    unit = units[right];
    if (variant && (0 < right && right < 3)) {
      unit = ['', 'одна', 'две'][right];
    }
    return (tens[left] + " " + unit).trim();
  };

  getHundreds = function(number) {
    return hundreds[Math.floor(number / 100)];
  };

  processInput = function(number) {
    var k, num, remain, res, results;
    remain = 0;
    results = [];
    for (num = k = 1; k <= 7; num = ++k) {
      res = Math.floor(((number - remain) % Math.pow(1000, num)) / Math.pow(1000, num - 1));
      remain += res;
      results.push(res);
    }
    return results;
  };

  convertToText = function(number, i) {
    var j, last, ref, variant;
    if (number === 0) {
      return '';
    }
    last = number % 10;
    j = 0;
    if ((1 < last && last < 5)) {
      j = 1;
    }
    if (last === 0 || last > 4 || (10 < (ref = number % 100) && ref < 20)) {
      j = 2;
    }
    variant = i === 1;
    return ((getHundreds(number)) + " " + (getDecimals(number, variant)) + " " + thousands[i][j]).trim();
  };

  toWords = function(numberString) {
    var group, i, numArray, number, result;
    if (initialCheck(numberString)) {
      return null;
    }
    number = +numberString;
    if (number === 0) {
      return 'ноль';
    }
    numArray = processInput(number);
    return result = ((function() {
      var k, len, results;
      results = [];
      for (i = k = 0, len = numArray.length; k < len; i = ++k) {
        group = numArray[i];
        results.push(convertToText(group, i));
      }
      return results;
    })()).reverse().join(' ').trim();
  };

  module.exports = toWords;

}).call(this);
